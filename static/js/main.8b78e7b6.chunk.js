(this["webpackJsonpcurrency-exchange"]=this["webpackJsonpcurrency-exchange"]||[]).push([[0],{54:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(15),o=c.n(a),r=c(4),i=c(14),u=c(30),l=c.n(u),j=c(7),b=(c(54),c(3)),f=function(){var e=Object(n.useContext)(j.a),t=e.date,c=e.setDate,s=e.handleFadeOut;return Object(b.jsxs)("header",{onClick:s,children:[Object(b.jsxs)("div",{className:"logo",children:[Object(b.jsx)("img",{src:"./logo.png",alt:"logo"}),Object(b.jsx)("p",{children:"Currency Exchange"})]}),Object(b.jsx)("section",{children:Object(b.jsx)(l.a,{onChange:c,value:t})})]})},h=c(29),d=c(25),O=c.n(d),g=c(26),m=c.n(g),x=c(12),y=c(13),v=function(e){var t=e.currency,c=Object(n.useState)(null),s=Object(r.a)(c,2),a=s[0],o=s[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),l=u[0],f=u[1],d=t.name,g=t.code,v=t.index,p=Object(n.useContext)(j.a),C=p.base,S=p.setBase,N=p.rates,k=p.allCurrency,E=p.setAllCurrency,F=p.amount,L=p.setAmount,_=p.coeficient,w=p.setCoeficient;Object(n.useEffect)((function(){if(g!==C){var e=N[g]*F*_;f(e.toFixed(2))}}),[C,g,N,F,_]),Object(n.useEffect)((function(){o(O()(g))}),[g]);return Object(b.jsxs)("div",{className:C===g?"card base":"card",children:[Object(b.jsx)(x.a,{icon:y.d,className:"close",onClick:function(){var e=Object(h.a)(k);e[v].active=!1,E(e),e[v].code===C&&(S("EUR"),w(1))}}),Object(b.jsx)(m.a,{currency:g,className:"flag",size:"lg"}),Object(b.jsx)("p",{className:"symbol",children:a}),Object(b.jsx)("input",{type:"text",value:l,onChange:function(e){g!==C&&(S(g),w("EUR"===g?1:1/N[g])),isNaN(Number(e.target.value))||(f(e.target.value),L(e.target.value))},autoComplete:"false",className:"textbox",placeholder:"amount"}),Object(b.jsx)("p",{className:"abbreviation",children:g}),Object(b.jsxs)("p",{className:"convert","data-msg":"".concat((N[g]*_).toFixed(6)," ").concat(g),children:["1 ",C," = ",(N[g]*_).toFixed(2)," ",g]}),Object(b.jsx)("p",{className:"name",children:d})]})},p=(c(63),function(){var e=Object(n.useContext)(j.a),t=e.setShowCurrencyList,c=e.showCurrencyList,s=e.currencyRef,a=e.toggleChevron,o=e.setToggleChevron;return Object(b.jsx)("footer",{className:c?void 0:"tooltip","data-tooltip":"Add currency",onClick:function(){o((function(e){return!e})),c?(i.a.to(s.current,.3,{y:"200px",opacity:0}),setTimeout((function(){return t(!1)}),300)):t(!0)},children:Object(b.jsx)(x.a,{icon:y.a,className:"expand_collapse",rotation:a?180:0})})}),C=(c(64),function(){return Object(b.jsx)("div",{className:"loading",children:Object(b.jsx)("h1",{children:"Loading"})})}),S=(c(65),c(66),"af8e95f6ec37b3b3219e0bb172121a74"),N=s.a.lazy((function(){return c.e(3).then(c.bind(null,72))}));var k=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(1),o=Object(r.a)(a,2),u=o[0],l=o[1],h=Object(n.useState)(0),d=Object(r.a)(h,2),O=d[0],g=d[1],m=Object(n.useState)({}),x=Object(r.a)(m,2),y=x[0],k=x[1],E=Object(n.useState)([]),F=Object(r.a)(E,2),L=F[0],_=F[1],w=Object(n.useState)(!1),I=Object(r.a)(w,2),B=I[0],D=I[1],R=Object(n.useState)(new Date),T=Object(r.a)(R,2),A=T[0],J=T[1],P=Object(n.useState)(!1),z=Object(r.a)(P,2),M=z[0],U=z[1],Y=Object(n.useRef)(null);Object(n.useEffect)((function(){fetch("http://api.exchangeratesapi.io/v1/latest?access_key=".concat(S)).then((function(e){return e.json()})).then((function(e){e.success?(s(e.base),k(e.rates)):console.error(e)})).catch((function(e){console.error(e)})),sessionStorage.getItem("currency_symbols")?(_(JSON.parse(sessionStorage.getItem("currency_symbols"))),console.log("Symbols loaded from session storage")):fetch("http://api.exchangeratesapi.io/v1/symbols?access_key=".concat(S)).then((function(e){return e.json()})).then((function(e){if(e.success){var t=e.symbols,c=Object.keys(t).map((function(e,c){return{name:t[e],code:e,index:c,active:!1}}));_(c),sessionStorage.setItem("currency_symbols",JSON.stringify(c)),console.log("Symbols fetched from the server")}else console.error(e)})).catch((function(e){console.error(e)}))}),[]),Object(n.useEffect)((function(){L.length&&sessionStorage.setItem("currency_symbols",JSON.stringify(L))}),[L]),Object(n.useEffect)((function(){A?fetch("http://api.exchangeratesapi.io/v1/".concat(function(e){var t=new Date(e),c=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return c.length<2&&(c="0"+c),n.length<2&&(n="0"+n),[s,c,n].join("-")}(A),"?access_key=").concat(S)).then((function(e){return e.json()})).then((function(e){e.success?k(e.rates):console.error(e)})).catch((function(e){console.error(e)})):fetch("http://api.exchangeratesapi.io/v1/latest?access_key=".concat(S)).then((function(e){return e.json()})).then((function(e){e.success?(s(e.base),k(e.rates)):console.error(e)})).catch((function(e){console.error(e)}))}),[A]);var q=function(){U(!1),Y.current&&(i.b.to(Y.current,.3,{y:"200px",opacity:0}),setTimeout((function(){return D(!1)}),300))};Object(n.useEffect)((function(){M?document.getElementById("root").classList.add("modal"):document.getElementById("root").classList.remove("modal")}),[M]);var G={coeficient:u,setCoeficient:l,toggleChevron:M,setToggleChevron:U,handleFadeOut:q,amount:O,setAmount:g,allCurrency:L,setAllCurrency:_,base:c,setBase:s,showCurrencyList:B,setShowCurrencyList:D,currencyRef:Y,rates:y,setRates:k,date:A,setDate:J};return Object(b.jsx)(j.a.Provider,{value:G,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"body",onClick:q,children:L.map((function(e){return e.active?Object(b.jsx)(v,{currency:e},e.code):void 0}))}),B&&Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(C,{}),children:Object(b.jsx)(N,{})}),Object(b.jsx)(p,{})]})})},E=function(e){e&&e instanceof Function&&c.e(4).then(c.bind(null,71)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),E()},7:function(e,t,c){"use strict";var n=c(1),s=c.n(n).a.createContext();t.a=s}},[[68,1,2]]]);
//# sourceMappingURL=main.8b78e7b6.chunk.js.map